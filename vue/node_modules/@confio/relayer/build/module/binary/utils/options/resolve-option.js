import { InvalidOptionError } from '../../exceptions/InvalidOptionError';
export function resolveOption(identifier, optionsParam) {
    return (...args) => {
        const options = {
            required: optionsParam?.required ?? false,
            integer: optionsParam?.integer ?? false,
        };
        const value = findValue(...args);
        if (value === null) {
            if (options.required) {
                throw new InvalidOptionError(`"${identifier}" option is required.`);
            }
            return null;
        }
        if (options.integer) {
            const parsedValue = parseInt(value, 10);
            if (isNaN(parsedValue)) {
                throw new InvalidOptionError(`"${identifier}" option has value "${value}" while it must be an integer.`);
            }
            return parsedValue;
        }
        return value;
    };
}
function findValue(...args) {
    for (const option of args) {
        const value = typeof option === 'function' ? option() : option;
        if (value !== undefined && value !== null) {
            return value;
        }
    }
    return null;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb2x2ZS1vcHRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvYmluYXJ5L3V0aWxzL29wdGlvbnMvcmVzb2x2ZS1vcHRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUE0QnpFLE1BQU0sVUFBVSxhQUFhLENBQzNCLFVBQWtCLEVBQ2xCLFlBQXdEO0lBRXhELE9BQU8sQ0FBQyxHQUFHLElBQVUsRUFBRSxFQUFFO1FBQ3ZCLE1BQU0sT0FBTyxHQUFHO1lBQ2QsUUFBUSxFQUFFLFlBQVksRUFBRSxRQUFRLElBQUksS0FBSztZQUN6QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE9BQU8sSUFBSSxLQUFLO1NBQ3hDLENBQUM7UUFFRixNQUFNLEtBQUssR0FBRyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUVqQyxJQUFJLEtBQUssS0FBSyxJQUFJLEVBQUU7WUFDbEIsSUFBSSxPQUFPLENBQUMsUUFBUSxFQUFFO2dCQUNwQixNQUFNLElBQUksa0JBQWtCLENBQUMsSUFBSSxVQUFVLHVCQUF1QixDQUFDLENBQUM7YUFDckU7WUFDRCxPQUFPLElBQUksQ0FBQztTQUNiO1FBRUQsSUFBSSxPQUFPLENBQUMsT0FBTyxFQUFFO1lBQ25CLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFFeEMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLEVBQUU7Z0JBQ3RCLE1BQU0sSUFBSSxrQkFBa0IsQ0FDMUIsSUFBSSxVQUFVLHVCQUF1QixLQUFLLGdDQUFnQyxDQUMzRSxDQUFDO2FBQ0g7WUFFRCxPQUFPLFdBQVcsQ0FBQztTQUNwQjtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsU0FBUyxDQUFDLEdBQUcsSUFBVTtJQUM5QixLQUFLLE1BQU0sTUFBTSxJQUFJLElBQUksRUFBRTtRQUN6QixNQUFNLEtBQUssR0FBRyxPQUFPLE1BQU0sS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7UUFFL0QsSUFBSSxLQUFLLEtBQUssU0FBUyxJQUFJLEtBQUssS0FBSyxJQUFJLEVBQUU7WUFDekMsT0FBTyxLQUFLLENBQUM7U0FDZDtLQUNGO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDIn0=