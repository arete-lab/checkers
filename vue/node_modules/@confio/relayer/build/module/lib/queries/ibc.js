import { toAscii } from '@cosmjs/encoding';
import { createPagination, createRpc } from '@cosmjs/stargate';
import Long from 'long';
import { CommitmentProof } from '../../codec/confio/proofs';
import { Any } from '../../codec/google/protobuf/any';
import { Channel } from '../../codec/ibc/core/channel/v1/channel';
import { QueryClientImpl as ChannelQuery, } from '../../codec/ibc/core/channel/v1/query';
import { QueryClientImpl as ClientQuery, QueryConsensusStateRequest, } from '../../codec/ibc/core/client/v1/query';
import { MerkleProof } from '../../codec/ibc/core/commitment/v1/commitment';
import { ConnectionEnd } from '../../codec/ibc/core/connection/v1/connection';
import { QueryClientImpl as ConnectionQuery, QueryConnectionConsensusStateRequest, } from '../../codec/ibc/core/connection/v1/query';
import { ClientState as TendermintClientState, ConsensusState as TendermintConsensusState, } from '../../codec/ibc/lightclients/tendermint/v1/tendermint';
function decodeTendermintClientStateAny(clientState) {
    if (clientState?.typeUrl !== '/ibc.lightclients.tendermint.v1.ClientState') {
        throw new Error(`Unexpected client state type: ${clientState?.typeUrl}`);
    }
    return TendermintClientState.decode(clientState.value);
}
function decodeTendermintConsensusStateAny(clientState) {
    if (clientState?.typeUrl !== '/ibc.lightclients.tendermint.v1.ConsensusState') {
        throw new Error(`Unexpected client state type: ${clientState?.typeUrl}`);
    }
    return TendermintConsensusState.decode(clientState.value);
}
export function heightQueryString(height) {
    return `${height.revisionNumber}-${height.revisionHeight}`;
}
export function setupIbcExtension(base) {
    const rpc = createRpc(base);
    // Use these services to get easy typed access to query methods
    // These cannot be used for proof verification
    const channelQueryService = new ChannelQuery(rpc);
    const clientQueryService = new ClientQuery(rpc);
    const connectionQueryService = new ConnectionQuery(rpc);
    return {
        ibc: {
            channel: {
                channel: async (portId, channelId) => channelQueryService.Channel({
                    portId: portId,
                    channelId: channelId,
                }),
                channels: async (paginationKey) => channelQueryService.Channels({
                    pagination: createPagination(paginationKey),
                }),
                allChannels: async () => {
                    const channels = [];
                    let response;
                    let key;
                    do {
                        response = await channelQueryService.Channels({
                            pagination: createPagination(key),
                        });
                        channels.push(...response.channels);
                        key = response.pagination?.nextKey;
                    } while (key);
                    return {
                        channels: channels,
                        height: response.height,
                    };
                },
                connectionChannels: async (connection, paginationKey) => channelQueryService.ConnectionChannels({
                    connection: connection,
                    pagination: createPagination(paginationKey),
                }),
                allConnectionChannels: async (connection) => {
                    const channels = [];
                    let response;
                    let key;
                    do {
                        response = await channelQueryService.ConnectionChannels({
                            connection: connection,
                            pagination: createPagination(key),
                        });
                        channels.push(...response.channels);
                        key = response.pagination?.nextKey;
                    } while (key);
                    return {
                        channels: channels,
                        height: response.height,
                    };
                },
                clientState: async (portId, channelId) => channelQueryService.ChannelClientState({
                    portId: portId,
                    channelId: channelId,
                }),
                consensusState: async (portId, channelId, revisionNumber, revisionHeight) => channelQueryService.ChannelConsensusState({
                    portId: portId,
                    channelId: channelId,
                    revisionNumber: Long.fromNumber(revisionNumber, true),
                    revisionHeight: Long.fromNumber(revisionHeight, true),
                }),
                packetCommitment: async (portId, channelId, sequence) => channelQueryService.PacketCommitment({
                    portId: portId,
                    channelId: channelId,
                    sequence: sequence,
                }),
                packetCommitments: async (portId, channelId, paginationKey) => channelQueryService.PacketCommitments({
                    channelId: channelId,
                    portId: portId,
                    pagination: createPagination(paginationKey),
                }),
                allPacketCommitments: async (portId, channelId) => {
                    const commitments = [];
                    let response;
                    let key;
                    do {
                        response = await channelQueryService.PacketCommitments({
                            channelId: channelId,
                            portId: portId,
                            pagination: createPagination(key),
                        });
                        commitments.push(...response.commitments);
                        key = response.pagination?.nextKey;
                    } while (key);
                    return {
                        commitments: commitments,
                        height: response.height,
                    };
                },
                packetReceipt: async (portId, channelId, sequence) => channelQueryService.PacketReceipt({
                    portId: portId,
                    channelId: channelId,
                    sequence: Long.fromNumber(sequence, true),
                }),
                packetAcknowledgement: async (portId, channelId, sequence) => channelQueryService.PacketAcknowledgement({
                    portId: portId,
                    channelId: channelId,
                    sequence: Long.fromNumber(sequence, true),
                }),
                packetAcknowledgements: async (portId, channelId, paginationKey) => channelQueryService.PacketAcknowledgements({
                    portId: portId,
                    channelId: channelId,
                    pagination: createPagination(paginationKey),
                }),
                allPacketAcknowledgements: async (portId, channelId) => {
                    const acknowledgements = [];
                    let response;
                    let key;
                    do {
                        response = await channelQueryService.PacketAcknowledgements({
                            channelId: channelId,
                            portId: portId,
                            pagination: createPagination(key),
                        });
                        acknowledgements.push(...response.acknowledgements);
                        key = response.pagination?.nextKey;
                    } while (key);
                    return {
                        acknowledgements: acknowledgements,
                        height: response.height,
                    };
                },
                unreceivedPackets: async (portId, channelId, packetCommitmentSequences) => channelQueryService.UnreceivedPackets({
                    portId: portId,
                    channelId: channelId,
                    packetCommitmentSequences: packetCommitmentSequences.map((s) => Long.fromNumber(s, true)),
                }),
                unreceivedAcks: async (portId, channelId, packetAckSequences) => channelQueryService.UnreceivedAcks({
                    portId: portId,
                    channelId: channelId,
                    packetAckSequences: packetAckSequences.map((s) => Long.fromNumber(s, true)),
                }),
                nextSequenceReceive: async (portId, channelId) => channelQueryService.NextSequenceReceive({
                    portId: portId,
                    channelId: channelId,
                }),
            },
            client: {
                state: (clientId) => clientQueryService.ClientState({ clientId }),
                states: (paginationKey) => clientQueryService.ClientStates({
                    pagination: createPagination(paginationKey),
                }),
                allStates: async () => {
                    const clientStates = [];
                    let response;
                    let key;
                    do {
                        response = await clientQueryService.ClientStates({
                            pagination: createPagination(key),
                        });
                        clientStates.push(...response.clientStates);
                        key = response.pagination?.nextKey;
                    } while (key);
                    return {
                        clientStates: clientStates,
                    };
                },
                consensusState: (clientId, consensusHeight) => clientQueryService.ConsensusState(QueryConsensusStateRequest.fromPartial({
                    clientId: clientId,
                    revisionHeight: consensusHeight !== undefined
                        ? Long.fromNumber(consensusHeight, true)
                        : undefined,
                    latestHeight: consensusHeight === undefined,
                })),
                consensusStates: (clientId, paginationKey) => clientQueryService.ConsensusStates({
                    clientId: clientId,
                    pagination: createPagination(paginationKey),
                }),
                allConsensusStates: async (clientId) => {
                    const consensusStates = [];
                    let response;
                    let key;
                    do {
                        response = await clientQueryService.ConsensusStates({
                            clientId: clientId,
                            pagination: createPagination(key),
                        });
                        consensusStates.push(...response.consensusStates);
                        key = response.pagination?.nextKey;
                    } while (key);
                    return {
                        consensusStates: consensusStates,
                    };
                },
                params: () => clientQueryService.ClientParams({}),
                stateTm: async (clientId) => {
                    const response = await clientQueryService.ClientState({ clientId });
                    return decodeTendermintClientStateAny(response.clientState);
                },
                statesTm: async (paginationKey) => {
                    const { clientStates } = await clientQueryService.ClientStates({
                        pagination: createPagination(paginationKey),
                    });
                    return clientStates.map(({ clientState }) => decodeTendermintClientStateAny(clientState));
                },
                allStatesTm: async () => {
                    const clientStates = [];
                    let response;
                    let key;
                    do {
                        response = await clientQueryService.ClientStates({
                            pagination: createPagination(key),
                        });
                        clientStates.push(...response.clientStates);
                        key = response.pagination?.nextKey;
                    } while (key);
                    return clientStates.map(({ clientState }) => decodeTendermintClientStateAny(clientState));
                },
                consensusStateTm: async (clientId, consensusHeight) => {
                    const response = await clientQueryService.ConsensusState(QueryConsensusStateRequest.fromPartial({
                        clientId: clientId,
                        revisionHeight: consensusHeight?.revisionHeight,
                        revisionNumber: consensusHeight?.revisionNumber,
                        latestHeight: consensusHeight === undefined,
                    }));
                    return decodeTendermintConsensusStateAny(response.consensusState);
                },
            },
            connection: {
                connection: async (connectionId) => connectionQueryService.Connection({
                    connectionId: connectionId,
                }),
                connections: async (paginationKey) => connectionQueryService.Connections({
                    pagination: createPagination(paginationKey),
                }),
                allConnections: async () => {
                    const connections = [];
                    let response;
                    let key;
                    do {
                        response = await connectionQueryService.Connections({
                            pagination: createPagination(key),
                        });
                        connections.push(...response.connections);
                        key = response.pagination?.nextKey;
                    } while (key);
                    return {
                        connections: connections,
                        height: response.height,
                    };
                },
                clientConnections: async (clientId) => connectionQueryService.ClientConnections({
                    clientId: clientId,
                }),
                clientState: async (connectionId) => connectionQueryService.ConnectionClientState({
                    connectionId: connectionId,
                }),
                consensusState: async (connectionId, revisionHeight) => connectionQueryService.ConnectionConsensusState(QueryConnectionConsensusStateRequest.fromPartial({
                    connectionId: connectionId,
                    revisionHeight: Long.fromNumber(revisionHeight, true),
                })),
            },
            proof: {
                // these keys can all be found here: https://github.com/cosmos/cosmos-sdk/blob/v0.41.1/x/ibc/core/24-host/keys.go
                // note some have changed since the v0.40 pre-release this code was based on
                channel: {
                    channel: async (portId, channelId, proofHeight) => {
                        // key: https://github.com/cosmos/cosmos-sdk/blob/ef0a7344af345882729598bc2958a21143930a6b/x/ibc/24-host/keys.go#L117-L120
                        const key = toAscii(`channelEnds/ports/${portId}/channels/${channelId}`);
                        const proven = await base.queryRawProof('ibc', key, proofHeight.revisionHeight.toNumber());
                        const channel = Channel.decode(proven.value);
                        const proof = convertProofsToIcs23(proven.proof);
                        return {
                            channel: channel,
                            proof: proof,
                            proofHeight,
                        };
                    },
                    // designed only for timeout, modify if we need actual value not just proof
                    // could not verify absence of key receipts/ports/transfer/channels/channel-5/sequences/2
                    receiptProof: async (portId, channelId, sequence, proofHeight) => {
                        const key = toAscii(`receipts/ports/${portId}/channels/${channelId}/sequences/${sequence}`);
                        const proven = await base.queryRawProof('ibc', key, proofHeight.revisionHeight.toNumber());
                        const proof = convertProofsToIcs23(proven.proof);
                        return proof;
                    },
                    packetCommitment: async (portId, channelId, sequence, proofHeight) => {
                        const key = toAscii(`commitments/ports/${portId}/channels/${channelId}/sequences/${sequence.toNumber()}`);
                        const proven = await base.queryRawProof('ibc', key, proofHeight.revisionHeight.toNumber());
                        const commitment = proven.value;
                        const proof = convertProofsToIcs23(proven.proof);
                        return {
                            commitment: commitment,
                            proof: proof,
                            proofHeight: proofHeight,
                        };
                    },
                    packetAcknowledgement: async (portId, channelId, sequence, proofHeight) => {
                        const key = toAscii(`acks/ports/${portId}/channels/${channelId}/sequences/${sequence}`);
                        const proven = await base.queryRawProof('ibc', key, proofHeight.revisionHeight.toNumber());
                        const acknowledgement = proven.value;
                        const proof = convertProofsToIcs23(proven.proof);
                        return {
                            acknowledgement: acknowledgement,
                            proof: proof,
                            proofHeight: proofHeight,
                        };
                    },
                    nextSequenceReceive: async (portId, channelId, proofHeight) => {
                        const key = toAscii(`nextSequenceRecv/ports/${portId}/channels/${channelId}`);
                        const proven = await base.queryRawProof('ibc', key, proofHeight.revisionHeight.toNumber());
                        const nextSequenceReceive = Long.fromBytesBE([...proven.value]);
                        const proof = convertProofsToIcs23(proven.proof);
                        return {
                            nextSequenceReceive: nextSequenceReceive,
                            proof: proof,
                            proofHeight: proofHeight,
                        };
                    },
                },
                client: {
                    state: async (clientId, proofHeight) => {
                        const key = `clients/${clientId}/clientState`;
                        const proven = await base.queryRawProof('ibc', toAscii(key), proofHeight.revisionHeight.toNumber());
                        const clientState = Any.decode(proven.value);
                        const proof = convertProofsToIcs23(proven.proof);
                        return {
                            clientState,
                            proof,
                            proofHeight,
                        };
                    },
                    consensusState: async (clientId, consensusHeight, proofHeight) => {
                        const height = heightQueryString(consensusHeight);
                        const key = `clients/${clientId}/consensusStates/${height}`;
                        const proven = await base.queryRawProof('ibc', toAscii(key), proofHeight.revisionHeight.toNumber());
                        const consensusState = Any.decode(proven.value);
                        const proof = convertProofsToIcs23(proven.proof);
                        return {
                            consensusState,
                            proof,
                            proofHeight,
                        };
                    },
                },
                connection: {
                    connection: async (connectionId, proofHeight) => {
                        const key = `connections/${connectionId}`;
                        const proven = await base.queryRawProof('ibc', toAscii(key), proofHeight.revisionHeight.toNumber());
                        const connection = ConnectionEnd.decode(proven.value);
                        const proof = convertProofsToIcs23(proven.proof);
                        return {
                            connection,
                            proof,
                            proofHeight,
                        };
                    },
                },
            },
        },
    };
}
function convertProofsToIcs23(ops) {
    const proofs = ops.ops.map((op) => CommitmentProof.decode(op.data));
    const resp = MerkleProof.fromPartial({
        proofs,
    });
    return MerkleProof.encode(resp).finish();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWJjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9xdWVyaWVzL2liYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDM0MsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFNBQVMsRUFBZSxNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUV4QixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDNUQsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ3RELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQztBQUNsRSxPQUFPLEVBQ0wsZUFBZSxJQUFJLFlBQVksR0FjaEMsTUFBTSx1Q0FBdUMsQ0FBQztBQUUvQyxPQUFPLEVBQ0wsZUFBZSxJQUFJLFdBQVcsRUFJOUIsMEJBQTBCLEdBRzNCLE1BQU0sc0NBQXNDLENBQUM7QUFDOUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUM5RSxPQUFPLEVBQ0wsZUFBZSxJQUFJLGVBQWUsRUFHbEMsb0NBQW9DLEdBSXJDLE1BQU0sMENBQTBDLENBQUM7QUFDbEQsT0FBTyxFQUNMLFdBQVcsSUFBSSxxQkFBcUIsRUFDcEMsY0FBYyxJQUFJLHdCQUF3QixHQUMzQyxNQUFNLHVEQUF1RCxDQUFDO0FBRy9ELFNBQVMsOEJBQThCLENBQ3JDLFdBQTRCO0lBRTVCLElBQUksV0FBVyxFQUFFLE9BQU8sS0FBSyw2Q0FBNkMsRUFBRTtRQUMxRSxNQUFNLElBQUksS0FBSyxDQUFDLGlDQUFpQyxXQUFXLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztLQUMxRTtJQUNELE9BQU8scUJBQXFCLENBQUMsTUFBTSxDQUFD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